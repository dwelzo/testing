

##  **1ï¸âƒ£ What Is Code Coverage?**

**Code coverage** measures **how much of your code is actually executed** when your tests run.

In simple words:

> It tells you how much of your code your tests are *touching*.

---

### ðŸŽ¯ Example

```ts
function greet(name?: string) {
  if (!name) return "Hello, Stranger!";
  return `Hello, ${name}!`;
}
```

âœ… You write **one test:**

```ts
test("should greet user by name", () => {
  expect(greet("Mahesh")).toBe("Hello, Mahesh!");
});
```

ðŸ§ª When you run tests:

* The line `return \`Hello, ${name}!`;` executes âœ…
* The line `if (!name)` never executes âŒ

So your coverage is **~50%** â€” because **half the code** didnâ€™t run.

---

## ðŸ§  **2ï¸âƒ£ Why Coverage Matters**

| Reason                      | Why                                         |
| --------------------------- | ------------------------------------------- |
| ðŸª² **Detect untested code** | Shows areas you forgot to test              |
| ðŸ” **Increase confidence**  | If 90%+ of code is covered, fewer surprises |
| ðŸ§± **Safer refactoring**    | You know existing logic is guarded by tests |
| âš™ï¸ **Enforces discipline**  | Teams ensure consistent testing quality     |

---

## ðŸ“Š **3ï¸âƒ£ Types of Coverage Metrics**

There are 4 main types of coverage metrics youâ€™ll see in reports:

| Metric                 | What It Measures          | Example                           |
| ---------------------- | ------------------------- | --------------------------------- |
| **Line coverage**      | % of lines executed       | Did every line of code run?       |
| **Statement coverage** | % of statements executed  | `let`, `if`, `return`, etc.       |
| **Branch coverage**    | % of if/else branches run | Did both `if` and `else` execute? |
| **Function coverage**  | % of functions tested     | Did every function get called?    |

---

### ðŸ“– Example Breakdown

```ts
function calculate(a: number, b: number) {
  if (b === 0) return "Error";
  return a / b;
}
```

| Test Case                  | Code Covered   |
| -------------------------- | -------------- |
| `calculate(10, 2)`         | âœ… main branch  |
| Missing `calculate(10, 0)` | âŒ error branch |

âž¡ï¸ **Branch coverage = 50%**
Because one path (`b === 0`) never ran.

---

## ðŸ§® **4ï¸âƒ£ How Itâ€™s Calculated**

Letâ€™s say your file has 10 lines of code.
If your tests execute 8 lines:

```
Line Coverage = (8 / 10) Ã— 100 = 80%
```

Same logic applies for branches and functions.

---

## ðŸ§° **5ï¸âƒ£ In Jest (TypeScript / JavaScript)**

### Enable coverage:

```bash
npm test -- --coverage
```

or add in `package.json`:

```json
"scripts": {
  "test": "jest --coverage"
}
```

### Output Example:

```
-----------------|---------|----------|---------|---------
File             | % Stmts | % Branch | % Funcs | % Lines |
-----------------|---------|----------|---------|---------
All files        |   90.00 |    80.00 |   100.00|   90.00 |
 app.ts          |   90.00 |    80.00 |   100.00|   90.00 |
-----------------|---------|----------|---------|---------
```

* **% Stmts:** Statement coverage
* **% Branch:** Branch (if/else) coverage
* **% Funcs:** Function coverage
* **% Lines:** Line coverage

Youâ€™ll also get a **HTML report** in `/coverage/lcov-report/index.html`.

---

## ðŸ§± **6ï¸âƒ£ Real-World Target**

| Environment              | Recommended Coverage                                                                      |
| ------------------------ | ----------------------------------------------------------------------------------------- |
| ðŸ§‘â€ðŸ’» Development        | 70â€“80% (good)                                                                             |
| ðŸ¢ Production/Enterprise | 85â€“95% (excellent)                                                                        |
| ðŸš« 100%                  | Possible but not always meaningful â€” focus on **important logic**, not every trivial line |

---

## âš ï¸ **7ï¸âƒ£ Common Misunderstandings**

âŒ High coverage â‰  good tests
âœ… Meaningful tests = good tests

For example:

```ts
expect(true).toBe(true);
```

This gives 100% coverage but **tests nothing useful**.

So focus on **testing behavior, not just numbers**.

---

## âœ… **8ï¸âƒ£ How to Improve Coverage**

1. Add tests for **error handling** (like missing inputs)
2. Cover **all branches** (`if`, `else`, `switch`)
3. Test **loop boundaries** (`0`, `1`, `many`)
4. Use coverage reports to identify **untested lines**
5. Add **negative tests** (bad inputs, nulls, exceptions)

---

## ðŸ“Œ **9ï¸âƒ£ Summary**
```

| Concept       | Meaning                               |
| ------------- | ------------------------------------- |
| Code Coverage | How much code your tests actually run |
| Types         | Line, Statement, Branch, Function     |
| Tool          | Jest, Istanbul                        |
| Command       | `npm test -- --coverage`              |
| Goal          | 80â€“90% realistic target               |
| Remember      | Quality > Quantity of tests           |

```
