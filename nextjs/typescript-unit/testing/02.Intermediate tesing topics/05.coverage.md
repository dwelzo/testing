# What Is Jest Coverage?

```
Jest coverage measures how much of your code is executed by your tests.
```
It tells you:

-    Which functions and branches were tested.

-   Which lines of code are never run.

-   How much of your project is covered by tests (as a percentage).


PS D:\Testing> npm run test -- --coverage

> test
> jest --coverage


its run an entire files and detail report
                                                                    ```                       
----------------|---------|----------|---------|---------|-------------------
File            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------------|---------|----------|---------|---------|-------------------
All files       |      80 |      100 |   82.35 |   85.71 |                   
 db.ts          |     100 |      100 |     100 |     100 |                   
 desc.ts        |       0 |      100 |       0 |       0 | 3-5               
 math.ts        |     100 |      100 |     100 |     100 |                   
 userService.ts |     100 |      100 |     100 |     100 |                   
----------------|---------|----------|---------|---------|-------------------
Test Suites: 13 passed, 13 total
Tests:       39 passed, 39 total
Snapshots:   0 total
Time:        9.703 s, estimated 13 s
Ran all test suites.



# What is coverageThreshold?

- coverageThreshold defines the minimum coverage percentage your project must maintain.
- If Jest detects lower coverage (for statements, lines, functions, or branches), it will fail the test suite.

It‚Äôs typically added inside your jest.config.ts (or jest.config.js).



```
const { createDefaultPreset } = require("ts-jest");

const tsJestTransformCfg = createDefaultPreset().transform;

/** @type {import("jest").Config} **/
module.exports = {
  // üß† Base Environment
  testEnvironment: "node",
  verbose: true,

  // üß© Use ts-jest for TypeScript transformation
  transform: {
    ...tsJestTransformCfg,
  },

  // üìÅ Specify your project root folder(s)
  roots: ["<rootDir>/testing/10. practice"],

  // üß™ Look for test files under /test folders with .test.ts extensions
  testMatch: ["**/test/**/*.test.ts"],

  // üõ£Ô∏è Map your alias imports (for cleaner paths like @app/)
  moduleNameMapper: {
    "^@app/(.*)$": "<rootDir>/testing/10. practice/app/$1",
    "^@test/(.*)$": "<rootDir>/testing/10. practice/test/$1",
  },

  // üìä Coverage configuration
  collectCoverage: true,
  collectCoverageFrom: [
    "testing/10. practice/app/**/*.ts",     // Include all app source files
    "!testing/10. practice/app/**/*.d.ts",  // Exclude type declarations
    "!**/node_modules/**",
  ],
  coverageDirectory: "<rootDir>/coverage",  // Output folder for reports

  // üö® Minimum coverage thresholds (auto-fail if below)
  coverageThreshold: {
    global: {
      statements: 80,  // % of all statements executed
      branches: 80,    // % of branches (if/else)
      functions: 80,   // % of functions called
      lines: 80,       // % of code lines executed
    },
  },

  // üßπ Reset mocks and modules between tests (good practice)
  clearMocks: true,
  resetModules: false,
  restoreMocks: true,
};
```


## What Each Section Does

```
| Section                      | Purpose                                                |
| ---------------------------- | ------------------------------------------------------ |
| `transform`                  | Enables TypeScript support via **ts-jest**             |
| `roots`                      | Defines where Jest looks for source + tests            |
| `testMatch`                  | Limits Jest to `.test.ts` files inside `/test` folders |
| `moduleNameMapper`           | Handles path aliases like `@app/userService`           |
| `collectCoverageFrom`        | Specifies which files to include/exclude for coverage  |
| `coverageDirectory`          | Output folder for the HTML and JSON coverage reports   |
| `coverageThreshold`          | Minimum required coverage (will fail if below)         |
| `clearMocks`, `restoreMocks` | Ensures clean environment between tests                |

```


# Run and Enforce Coverage

**npm run test -- --coverage**

```
PASS  testing/10. practice/test/userService.test.ts
----------------|---------|----------|---------|---------|-------------------
File            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
----------------|---------|----------|---------|---------|-------------------
All files       |     100 |      100 |     100 |     100 |
----------------|---------|----------|---------|---------|-------------------

```

**If below threshold:**

```
FAIL  Coverage below global threshold (80%)
Statements   : 75% (below threshold)
Functions    : 78% (below threshold)
```